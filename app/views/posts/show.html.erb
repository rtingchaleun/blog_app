<main class="container mt-5 pt-3">
  <%= link_to 'Back', posts_path %> |
  <%= link_to 'Edit', edit_post_path(@post) %> |
  <%= link_to 'Delete', @post, method: :delete, data: { confirm: 'Are you sure?' } %>

  <div class="jumbotron">
    <h1 class="text-dark"><%= @post.title %></h1>
    <p class="text-muted small">By <%= @post.user.email %></p>
    <p class="small text-muted">Last updated: <%= @post.updated_at.strftime("%b %e, %l:%M %p") %> | <%= @post.views %> Views</p>
    <p class="text-dark">
      <%= @post.body %>
    </p>
  </div>
</main>

<section class="container">
  <div class="row">
    <div class="col-9">
      <%= render 'comments/form' %>

      <hr>

      <h2><%= @post.comments.count %> Comments</h2>
      <% @post.comments.select(&:persisted?).reverse.each do |comment| %>
        <div class="card mt-3">
          <div class="card-header">
            Featured
          </div>
          <div class="card-body">
            <p class="card-text small text-muted"><%= time_ago_in_words(comment.created_at) %> ago</p>
            <p class="card-text"><%= comment.body %></p>
            <div class="d-flex content-justify-end">
              <div class="ml-auto">
                <%= link_to 'Delete', [comment.post, comment], class:'btn btn-danger', method: :delete, data: { confirm: 'Are you sure?' } %>
              </div>
            </div>
          </div>
        </div>
      <% end %>

    </div>
    <!-- /.col-9 -->
  </div>
  <!-- /.row -->
</section>
